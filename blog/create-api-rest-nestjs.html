<!DOCTYPE html>
<html lang="es-ES">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Crear un api rest con Nest.js | ChristianTola</title>
    <meta name="description" content="Este es el primero de los artículos relacionados a Nest.js, Nest.js es un Framework para el desarrollo backend.">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pacifico|Roboto&amp;display=swap">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon.ico">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
  <meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <script src="https://www.google.com/recaptcha/api.js?render=6LcCmNEUAAAAABtpW4cic7ehTh_aCpyFQWiiSZQM"></script>
    <meta property="og:url" content="https://christiantola.me/blog/create-api-rest-nestjs.html"><meta property="og:type" content="article"><meta property="og:title" content="Crear un api rest con Nest.js"><meta property="og:description" content="Este es el primero de los artículos relacionados a Nest.js, Nest.js es un Framework para el desarrollo backend."><meta property="og:image" content="https://christiantola.me/images/banners/BannerTemplateNode.jpg"><meta property="og:site_name" content="christiantola.me"><meta property="article:author" content="https://www.facebook.com/ctola01/"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@ctola91"><meta name="twitter:title" content="Crear un api rest con Nest.js"><meta name="twitter:description" content="Este es el primero de los artículos relacionados a Nest.js, Nest.js es un Framework para el desarrollo backend."><meta name="twitter:image" content="https://christiantola.me/images/banners/BannerTemplateNode.jpg">
    <link rel="preload" href="/assets/css/0.styles.a81cc804.css" as="style"><link rel="preload" href="/assets/js/app.57c1f26c.js" as="script"><link rel="preload" href="/assets/js/23.94ac9e16.js" as="script"><link rel="preload" href="/assets/js/8.3f47c0aa.js" as="script"><link rel="preload" href="/assets/js/9.49749e79.js" as="script"><link rel="preload" href="/assets/js/26.c7a86775.js" as="script"><link rel="preload" href="/assets/js/24.7b7bdc76.js" as="script"><link rel="preload" href="/assets/js/29.b2886b6f.js" as="script"><link rel="preload" href="/assets/js/19.ce840e2e.js" as="script"><link rel="preload" href="/assets/js/20.6063801c.js" as="script"><link rel="prefetch" href="/assets/js/10.efe55b86.js"><link rel="prefetch" href="/assets/js/11.778f3e20.js"><link rel="prefetch" href="/assets/js/12.ec668abe.js"><link rel="prefetch" href="/assets/js/13.e4fcbd57.js"><link rel="prefetch" href="/assets/js/14.33be8d4e.js"><link rel="prefetch" href="/assets/js/15.3ebbcc77.js"><link rel="prefetch" href="/assets/js/16.5b77a9ea.js"><link rel="prefetch" href="/assets/js/17.f359af93.js"><link rel="prefetch" href="/assets/js/18.0483bdc9.js"><link rel="prefetch" href="/assets/js/21.85a26e10.js"><link rel="prefetch" href="/assets/js/22.1a805160.js"><link rel="prefetch" href="/assets/js/25.4277a87a.js"><link rel="prefetch" href="/assets/js/27.a08fe3db.js"><link rel="prefetch" href="/assets/js/28.71213135.js"><link rel="prefetch" href="/assets/js/3.264a9de7.js"><link rel="prefetch" href="/assets/js/30.4b16fcba.js"><link rel="prefetch" href="/assets/js/31.02ac873f.js"><link rel="prefetch" href="/assets/js/32.4d3c6c34.js"><link rel="prefetch" href="/assets/js/33.13eb2d51.js"><link rel="prefetch" href="/assets/js/34.5716eafc.js"><link rel="prefetch" href="/assets/js/35.d427b99a.js"><link rel="prefetch" href="/assets/js/36.13da8003.js"><link rel="prefetch" href="/assets/js/37.80ba2afb.js"><link rel="prefetch" href="/assets/js/38.4e506ce1.js"><link rel="prefetch" href="/assets/js/39.23bb6163.js"><link rel="prefetch" href="/assets/js/4.809fb868.js"><link rel="prefetch" href="/assets/js/40.8c164c3c.js"><link rel="prefetch" href="/assets/js/41.47feb4ef.js"><link rel="prefetch" href="/assets/js/42.3858b73f.js"><link rel="prefetch" href="/assets/js/43.77c8f084.js"><link rel="prefetch" href="/assets/js/44.01e0d82d.js"><link rel="prefetch" href="/assets/js/45.3bc541c7.js"><link rel="prefetch" href="/assets/js/46.1c501f1a.js"><link rel="prefetch" href="/assets/js/47.a580ff79.js"><link rel="prefetch" href="/assets/js/48.a87acbef.js"><link rel="prefetch" href="/assets/js/49.6d8fb5e3.js"><link rel="prefetch" href="/assets/js/5.8152e5ea.js"><link rel="prefetch" href="/assets/js/50.69a36eed.js"><link rel="prefetch" href="/assets/js/51.ab864176.js"><link rel="prefetch" href="/assets/js/52.640961cb.js"><link rel="prefetch" href="/assets/js/53.98a27dfa.js"><link rel="prefetch" href="/assets/js/54.709f1a89.js"><link rel="prefetch" href="/assets/js/55.9bde0707.js"><link rel="prefetch" href="/assets/js/56.17ed4dd7.js"><link rel="prefetch" href="/assets/js/57.56ca0363.js"><link rel="prefetch" href="/assets/js/58.020873c8.js"><link rel="prefetch" href="/assets/js/59.1ba59fb8.js"><link rel="prefetch" href="/assets/js/6.7d4e84bc.js"><link rel="prefetch" href="/assets/js/60.fa3f7fb5.js"><link rel="prefetch" href="/assets/js/61.ce75adde.js"><link rel="prefetch" href="/assets/js/62.9513d275.js"><link rel="prefetch" href="/assets/js/63.37b89697.js"><link rel="prefetch" href="/assets/js/64.f33974b5.js"><link rel="prefetch" href="/assets/js/7.ae40a15f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e3207163.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a81cc804.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ChristianTola</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/about/" class="nav-link">Sobre mi</a></div><div class="nav-item"><a href="/contact/" class="nav-link">Contacto</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/about/" class="nav-link">Sobre mi</a></div><div class="nav-item"><a href="/contact/" class="nav-link">Contacto</a></div> <!----></nav>  <!----> </div> <div class="custom-layout"><div data-v-0d047a04><div class="page" data-v-0d047a04><div class="content custom" data-v-0d047a04><h1 id="crear-un-api-rest-con-nest-js"><a href="#crear-un-api-rest-con-nest-js" aria-hidden="true" class="header-anchor">#</a> Crear un Api Rest con Nest.js</h1> <div class="container" data-v-31873e6a><div data-v-31873e6a><div data-v-31873e6a><a href="/about/" data-v-31873e6a>Christian Tola</a> <span class="badge tip top" data-v-31873e6a data-v-099ab69c>Node</span></div> <span data-v-31873e6a>2019 M02 17</span></div> <div data-v-31873e6a><div data-v-0e1ca9e0 data-v-31873e6a><!----></div></div></div> <div><img src="/images/banners/BannerTemplateNode.jpg" alt="create api rest nest"></div> <p>Node.js es un entorno de programación que permite crear aplicaciones en el lado del servidor utilizando Javascript como lenguaje principal, esto ha generado mucha popularidad entre los desarrolladores ya que permite desarrollar una aplicación en todos sus niveles (Base de datos, Backend, Frontend) con Javascript.</p> <p><a href="https://nestjs.com/" target="_blank" rel="noopener noreferrer">Nest.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> es un Framework para el desarrollo Backend que permite crear aplicaciones del lado del servidor utilizando Typescript.</p> <p><img src="/assets/img/nest_logo.d11da205.svg" alt="Nest.js"></p> <p>Nest.js utiliza un sistema de anotaciones para abstraer muchas de las configuraciones que se necesitan para crear un servidor rest, un servidor Graphql, o un WebSocket, permitiéndonos centrarnos mas en el código directamente.</p> <p>Si anteriormente ya hemos trabajado con Java para el desarrollo de aplicaciones web, Nest.js es un Framework muy parecido a <a href="https://spring.io/" target="_blank" rel="noopener noreferrer">Spring Boot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, ambos se basan en un sistema de anotaciones para las configuraciones, su sistema de inyección de dependencias esta inspirado en Angular y permite modularizar la aplicación de tal forma que podemos crear módulos para diferentes secciones de nuestra aplicación.</p> <p>La <a href="https://docs.nestjs.com/" target="_blank" rel="noopener noreferrer">documentación<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> oficial es muy completa e intuitiva, y contiene una gran variedad de ejemplos sobre las funcionalidades que se pueden desarrollar con Nest.js</p> <h2 id="instalacion"><a href="#instalacion" aria-hidden="true" class="header-anchor">#</a> Instalación</h2> <p>La mejor forma de iniciar un proyecto con Nest.js es instalando su interfaz de linea de comandos, para instalar Nest.js utilizaremos el siguiente comando:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Para sistemas operativos Mac o Linux agregar sudo por delante para realizar la instalación como super usuario.</span>
<span class="token function">npm</span> <span class="token function">install</span> -g @nestjs/cli
</code></pre></div><p>para verificar que la instalación fue satisfactoria ejecutamos el comando:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>nest --version
</code></pre></div><p>eso nos mostrara la version del nest cli que tenemos instalada.</p> <p>para comenzar un nuevo proyecto ejecutamos el siguiente comando:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>nest new my-rest
</code></pre></div><p>Nest nos solicitara una descripción, la version del proyecto y el autor del mismo, luego creara un nuevo proyecto llamado <em>my-rest</em> con toda la estructura inicial que necesitamos para comenzar.</p> <p><img src="/assets/img/nest-cli-result.be1b9159.png" alt="nest result"></p> <p>Si dentro del proyecto creado ejecutamos <strong>npm run start:dev</strong> nest compilara nuestro proyecto y levantara el servidor de desarrollo, el comando <strong>start:dev</strong> levanta el servidor de desarrollo y también nos permite realizar el <em>hot reloading</em>, cuando cambiemos cualquier fichero de nuestro servidor, este se refrescara.</p> <p>Ahora si accedemos en el browser a la url <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> veremos el mensaje <em>Hello World!</em> que nos confirma que nuestro proyecto esta funcionando correctamente.</p> <p><img src="data:image/png;base64,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" alt="nest start"></p> <p>En la nueva estructura de archivos que se creara la carpeta <strong>src</strong> es la carpeta mas importante de nuestra aplicación, es ahi donde se escribirá todo el código de nuestra aplicación.</p> <p>Dentro de la carpeta <strong>src</strong> Nest.js generó los siguientes archivos:</p> <ul><li><strong>app.controller.ts</strong>, el controlador(controller) de la aplicación.</li> <li><strong>app.controller.spec.ts</strong> , el archivo de test para el controller.</li> <li><strong>app.service.ts</strong>, un servicio que es donde se ejecutaran operaciones dentro del servidor.</li> <li><strong>app.module.ts</strong>, el archivo del modulo principal, Al igual que <a href="https://angular.io" target="_blank" rel="noopener noreferrer">Angular<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, Nest nos permite trabajar con una arquitectura modular.</li> <li><strong>main.ts</strong>, el punto de acceso de nuestra aplicación.</li></ul> <p>para comenzar con nuestro ejemplo generaremos toda la estructura que necesitaremos desde la terminal utilizando el nest-cli, primeramente generaremos nuestro modulo al cual llamaremos como <em>contact</em></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># es posible usar --dry-run para verificar los cambios antes de ejecutarlos.</span>
nest generate module contact
</code></pre></div><p>Esto agregara un nuevo folder llamado contact y dentro el archivo contact.module.ts, al mismo tiempo el modulo contact sera importado por el modulo principal, seguidamente dentro del modulo contact generaremos un servicio y un controller:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># generar controller</span>
nest generate controller contact 
<span class="token comment"># generar service</span>
nest generate <span class="token function">service</span> contact 
</code></pre></div><p><strong>Nota:</strong> Si el modulo contact no se hubiera generado antes de el controller y el servicio, tendríamos que manualmente importarlos dentro del modulo contact y quitarlos del modulo principal, de esta manera aseguramos que nuestro modulo <em>contact</em> se encargue de todo lo relacionado a contact dentro de nuestra aplicación.</p> <p>Una vez tengamos nuestro modulo creado crearemos una interfaz <em>contact</em> y una clase llamada <em>CreateContactDto</em>, esto podemos hacerlo desde el cli:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># generar una interfaz dentro del folder contact/interfaces</span>
nest generate interface contact/interfaces/contact
<span class="token comment"># generar una clase dentro del folder contact/dto</span>
nest generate class contact/interfaces/CreateContactDto
</code></pre></div><p>Ahora que tenemos todos los archivos necesarios para nuestra aplicación, comenzaremos por modificar nuestra interfaz y nuestro dto, nuestra interfaz <em>contact</em> tendrá el siguiente contenido en el archivo <strong>contact.interface.ts</strong>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Contact</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  phone<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>lo mismo para nuestra clase <em>CreateContactDto</em> en el archivo <strong>create-contact-dto.ts</strong>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CreateContactDto</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  lastName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  phone<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Utilizaremos la interface <em>Contact</em> como el tipo de objetos con el que interactuaremos con nuestro api rest. al cual accederemos por medio de nuestro <em>ContactController</em>, primeramente modificaremos nuestro <em>contact.service.ts</em> para agregar todas las operaciones que podremos realizar, en siguientes ejemplos utilizaremos una base de datos ya sea <strong>SQL</strong> o <strong>NoSQL</strong>, pero de momento utilizaremos un arreglo del tipo <em>Contact</em> para almacenar la información de nuestros contactos:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">...</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactService</span> <span class="token punctuation">{</span>
  contacts<span class="token punctuation">:</span> Contact<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Luego crearemos un método que nos permite retornar el valor del arreglo, y otro que permita agrega un nuevo elemento al arreglo, aquí es donde utilizaremos un objeto del tipo <em>CreateContactDto</em> como parámetro de nuestro método, para generar el id de cada contacto, utilizaremos la librería <a href="https://www.npmjs.com/package/uuid" target="_blank" rel="noopener noreferrer">uuid<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> que nos permitirá generar un id único para cada contacto.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># instalar uuid</span>
<span class="token function">npm</span> <span class="token function">install</span> --save uuid
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CreateContactDto <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dto/create-contact-dto'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Contact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./interfaces/contact.interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> uuidv4 <span class="token keyword">from</span> <span class="token string">'uuid/v4'</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactService</span> <span class="token punctuation">{</span>
  contacts<span class="token punctuation">:</span> Contact<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
  <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Contact<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">saveContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">)</span><span class="token punctuation">:</span> Contact <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newContact <span class="token operator">=</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      lastName<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>lastName<span class="token punctuation">,</span>
      age<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
      phone<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>phone<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newContact<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newContact<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Ya tenemos nuestro servicio que nos permite guardar un contacto, y mostrar la lista de los contactos guardados, ahora podemos modificar nuestro <strong>contact.controller.ts</strong>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Controller<span class="token punctuation">,</span> Get<span class="token punctuation">,</span> Post<span class="token punctuation">,</span> Body<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ContactService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./contact.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CreateContactDto <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dto/create-contact-dto'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Contact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./interfaces/contact.interface'</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">'contacts'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactController</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> readonly contactService<span class="token punctuation">:</span> ContactService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">create</span><span class="token punctuation">(</span>@<span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span> contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">)</span><span class="token punctuation">:</span> Contact <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">saveContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Como podemos ver la anotación <strong>@Controller('contacts')</strong> nos da a entender que esta clase es el punto de acceso para el controller llamado <em>contacts</em>, para agregar las respectivas urls de cada servicio utilizamos las anotaciones <strong>@Get()</strong> y <strong>@Post()</strong> en los métodos getContacts() y create() respectivamente, y a su vez los métodos llaman a los métodos definidos dentro de las funciones, esto permite separar la implementación y mantener la lógica propia de los controller separada de la lógica que accede a la base de datos.</p> <p>Es posible que tengamos problemas al trabajar ya con base de datos debido al tiempo que tarda en retornar los servicios, pero Nest.js nos permite trabajar con ello de manera asíncrona utilizando <strong>async/await</strong>.</p> <p>para ello modificamos nuestro controller y nuestro servicio de la siguiente forma:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// contact.service.ts</span>
<span class="token operator">...</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactService</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">async</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">saveContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newContact <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> newContact<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// contact.controller.ts</span>
<span class="token operator">...</span>
@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">'contacts'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactController</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span>@<span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span> contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">saveContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>De esta manera podremos trabajar de manera asíncrona.</p> <p>Finalmente aca tenemos nuestros <strong>contact.service.ts</strong> y <strong>contact.controller.ts</strong> completo.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CreateContactDto <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dto/create-contact-dto'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Contact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./interfaces/contact.interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> uuidv4 <span class="token keyword">from</span> <span class="token string">'uuid/v4'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'console'</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactService</span> <span class="token punctuation">{</span>
  contacts<span class="token punctuation">:</span> Contact<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token function">getContact</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> contact <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> contact<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">saveContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newContact <span class="token operator">=</span> <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      lastName<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>lastName<span class="token punctuation">,</span>
      age<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
      phone<span class="token punctuation">:</span> contact<span class="token punctuation">.</span>phone<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newContact<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newContact<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">editContact</span><span class="token punctuation">(</span>
    id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    editContact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> contact<span class="token punctuation">:</span> Contact <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token punctuation">.</span>name <span class="token operator">=</span> editContact<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        item<span class="token punctuation">.</span>lastName <span class="token operator">=</span> editContact<span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
        item<span class="token punctuation">.</span>phone <span class="token operator">=</span> editContact<span class="token punctuation">.</span>phone<span class="token punctuation">;</span>
        item<span class="token punctuation">.</span>age <span class="token operator">=</span> editContact<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
        contact <span class="token operator">=</span> item<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> contact<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">deleteContact</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pos <span class="token operator">=</span> index<span class="token punctuation">;</span>
        res <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Controller<span class="token punctuation">,</span>
  Get<span class="token punctuation">,</span>
  Post<span class="token punctuation">,</span>
  Put<span class="token punctuation">,</span>
  Delete<span class="token punctuation">,</span>
  Param<span class="token punctuation">,</span>
  Body<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ContactService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./contact.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CreateContactDto <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dto/create-contact-dto'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Contact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./interfaces/contact.interface'</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">'contacts'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ContactController</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> readonly contactService<span class="token punctuation">:</span> ContactService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getContact</span><span class="token punctuation">(</span>@<span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span>@<span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span> contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">saveContact</span><span class="token punctuation">(</span>contact<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Put</span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">editContact</span><span class="token punctuation">(</span>
    @<span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token punctuation">,</span>
    @<span class="token function">Body</span><span class="token punctuation">(</span><span class="token punctuation">)</span> contact<span class="token punctuation">:</span> CreateContactDto<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>Contact<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">editContact</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> contact<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Delete</span><span class="token punctuation">(</span><span class="token string">':id'</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">deleteContact</span><span class="token punctuation">(</span>@<span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> id<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>contactService<span class="token punctuation">.</span><span class="token function">deleteContact</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ejecuta <strong>npm run start:dev</strong> para levantar el proyecto y puedes probar las urls utilizando <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><img src="/assets/img/postman.d100af36.png" alt="postman res"></p> <p>Puedes encontrar mas información sobre nestjs en su <a href="https://docs.nestjs.com" target="_blank" rel="noopener noreferrer">documentación oficial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>El código de ejemplo se encuentra en <a href="https://github.com/cmtp/nest-api-rest/tree/api-rest-sample" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, recuerda instalar las dependencias y ejecutar el proyecto para probarlo:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone git@github.com:cmtp/nest-api-rest.git
<span class="token function">cd</span> nest-api-rest
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run start:dev
</code></pre></div><p><strong>Compártelo en tus redes Sociales!</strong> <div data-v-0e1ca9e0><!----></div></p> <div id="disqus_thread" data-v-9653cc20></div></div></div> <footer data-v-e1bdd874 data-v-0d047a04><div class="footer-content" data-v-e1bdd874><p data-v-e1bdd874>© COPYRIGHT 2019, Christian Tola
      <br data-v-e1bdd874>This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" data-v-e1bdd874>Creative Commons Attribution 4.0</a> International License. In other words, share generously but provide attribution.
    </p></div> <div class="footer-links" data-v-e1bdd874><a href="https://twitter.com/ctola91" data-v-e1bdd874><i class="fa fa-2x fa-twitter" data-v-e1bdd874></i></a> <a href="https://github.com/cmtp" data-v-e1bdd874><i class="fa fa-2x fa-github" data-v-e1bdd874></i></a> <a href="https://www.linkedin.com/in/christian-marcelo-tola-pacheco-436171113/" data-v-e1bdd874><i class="fa fa-2x fa-linkedin" data-v-e1bdd874></i></a></div></footer></div></div> <!----></div></div>
    <script src="/assets/js/23.94ac9e16.js" defer></script><script src="/assets/js/8.3f47c0aa.js" defer></script><script src="/assets/js/9.49749e79.js" defer></script><script src="/assets/js/26.c7a86775.js" defer></script><script src="/assets/js/24.7b7bdc76.js" defer></script><script src="/assets/js/29.b2886b6f.js" defer></script><script src="/assets/js/19.ce840e2e.js" defer></script><script src="/assets/js/20.6063801c.js" defer></script><script src="/assets/js/app.57c1f26c.js" defer></script>
  </body>
</html>
